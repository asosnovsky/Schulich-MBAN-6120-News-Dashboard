<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Science 2 - Dashboard - Assignment 2</title>
    
    <link rel="stylesheet" href="/static/vendor/vue-material/vue-material.min.css">
    <link rel="stylesheet" href="/static/vendor/vue-material/black-green-dark.css">
    <link rel="stylesheet" href="/static/vendor/material-icons.css">
    <link rel="stylesheet" href="/static/css/main.css">
    
    <script src="/static/vendor/moment.js"></script>
    <script src="/static/vendor/vue/vue.min.js"></script>
    <script src="/static/vendor/vue-material/vue-material.min.js"></script>
    <script src="/static/vendor/d3/d3.min.js"></script>
    <script src="/static/vendor/d3/d3-scale.min.js"></script>
    <script src="/static/vendor/d3/d3.layout.cloud.js"></script>
    
    <script src="/static/js/util.js"></script>
    <script src="/static/js/WordCloud.js"></script>
    <script src="/static/js/BarChart.js"></script>
    <script src="/static/js/DonutChart.js"></script>
    <script src="/static/js/main.js"></script>
    
</head>
<body>
    <style>
        .md-drawer.md-theme-default {
            flex: 0.15;
        }
        .md-app {
            min-height: 100vh;
        }
    </style>
    <div id="app">
        <div class="page-container">
            <md-app md-waterfall md-mode="fixed">
                <md-app-toolbar class="md-primary">
                    <span class="md-title">Newsapi Word Analyzer</span>
                </md-app-toolbar>
                
                <md-app-drawer md-permanent="full">
                    <loading-cover-up :loading="topics === 5"></loading-cover-up>
                    <md-toolbar class="md-transparent" md-elevation="0">
                        Topics
                    </md-toolbar>
                    
                    <md-list>
                        <md-list-item v-for="topic in topics" @click="setCurrentTopic(topic)">
                            <div class="md-list-item-text">
                                %(topic)%
                            </div>
                        </md-list-item>
                    </md-list>
                </md-app-drawer>
                
                <md-app-content id="data-container" style="overflow: hidden;">
                    <div id="key-numbers" class="md-layout-item md-layout md-size-100 md-center">
                        <div v-for="topWord in topWords" class="top-word md-layout-item md-elevation-5"> 
                            <div class="md-title">
                                %(topWord.word)%
                            </div>
                            <div>
                                <span class="md-display-2" style="font-size: 2em;">%(topWord.percent)%%</span>
                                <span class="md-caption" style="color: #949494">/%(topWord.count)%w</span>
                            </div>
                        </div>
                    </div>
                    <div id="viz" class="md-layout-item md-layout md-size-100">
                        <div class="md-layout-item md-size-40">
                            <loading-cover-up :loading="loadingStatus.wordCounts"></loading-cover-up>
                            <div class="md-title" style="text-align: center;">Most Frequent Words</div>
                            <div style="height: 50vh;">
                                <d3-word-cloud id="word-cloud" :data="wordCounts"></d3-word-cloud>
                            </div>
                        </div>
                        <div class="md-layout-item md-size-60">
                            <loading-cover-up :loading="loadingStatus.top10"></loading-cover-up>
                            <div class="md-title" style="text-align: center;">10 Word Mentions</div>
                            <div class="md-layout" style="height: 50vh;">
                                <div class="md-layout-item md-size-50">
                                    <div class="md-caption" style="text-align: right; padding-right: 1%;">Negative Words</div>
                                    <d3-bar-chart id="bar-chart-top-10-negative" :data="top10['negative']" :options="charOptions.bar_top10_neg"></d3-bar-chart>
                                </div>
                                <div class="md-layout-item md-size-50">
                                    <div class="md-caption" style="padding-left: 1%;">Positive Words</div>
                                    <d3-bar-chart id="bar-chart-top-10-positive" :data="top10['positive']" :options="charOptions.bar_top10_pos"></d3-bar-chart>
                                </div>
                            </div>
                        </div>
                        <div class="md-layout-item md-size-25" style="height: 70vh">
                            <loading-cover-up :loading="loadingStatus.top10"></loading-cover-up>
                            <div class="md-title" style="text-align: center;">Top 10 Neutral Words</div>
                            <d3-bar-chart id="bar-chart-top-10-neutral" :data="top10['neutral']" :options="charOptions.bar_top10_neut"></d3-bar-chart>
                        </div>
                        <div class="md-layout-item md-size-50">
                            <loading-cover-up :loading="loadingStatus.topWords"></loading-cover-up>
                            <div class="md-title" style="text-align: center;">Tone</div>
                            <d3-donut-chart id="donut-chart-word-types" :data="topWords"></d3-donut-chart>    
                        </div>
                        <div class="md-layout-item md-size-25" >
                            <loading-cover-up :loading="loadingStatus.articles"></loading-cover-up>
                            <div class="md-title" style="text-align: center;">News Feed</div>
                            <div style="max-height: 70vh; overflow-y: scroll; overflow-x: hidden;">
                                <md-card v-for="article in articles" class="article">
                                    <md-card-media-cover>
                                        <md-card-media md-ratio="16:9">
                                            <img :src="article.urlToImage">
                                        </md-card-media>
                                        
                                        <md-card-area>
                                            <md-card-header>
                                                <span class="md-subhead">
                                                    <a :href="article.url" target="__blank">
                                                        %(article.title)%
                                                    </a>
                                                </span>
                                                <span class="md-caption">by %(article.author)%, %(moment(article.publishedAt).fromNow())%</span>
                                            </md-card-header>
                                        </md-card-area>
                                    </md-card-media-cover>
                                </md-card>
                            </div>
                        </div>
                    </div>
                </md-app-content>
            </md-app>
        </div>
    </div>
    <footer>
        <a href="https://newsapi.org" target="_blank" rel="noopener noreferrer">Powered by News API</a>
    </footer>
</body>
</html>